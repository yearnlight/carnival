webpackJsonp([1],{"+ljQ":function(t,e){},"/pOV":function(t,e){},"1NtW":function(t,e){},"2M5K":function(t,e){},"3RNX":function(t,e){},C48H:function(t,e){},GFHN:function(t,e){},LicG:function(t,e){},NFsy:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("//Fk"),r=a.n(s),i=a("7+uW"),n=a("mtWM"),l=a.n(n),o=a("/ocq"),c=a("mvHQ"),u=a.n(c),m=function(t){var e=[],a="";for(var s in t)e.push(s+"="+t[s]);return e.length&&(a+="?",a+=e.join("&")),a},d={loginIn:function(t){return l.a.post("/user/login",t)},userList:function(t){return l.a.post("/user/list",t)},depts:function(t){return l.a.post("/user/dept/list")},addUser:function(t){return l.a.post("/user/add",t)},delUser:function(t){return l.a.post("/user/delete",t)},resetPass:function(t){return l.a.post("/user/reset-password",t)},recharge:function(t){return l.a.post("/user/recharge",t)},seatList:function(t){return l.a.post("/seat/list",t)},addSeat:function(t){return l.a.post("/seat/add",t)},lotteryList:function(t){return l.a.get("/web/hb/luckDraw/query")},addOrUpdateLottery:function(t){return l.a.post("/web/hb/luckDraw/addOrUpdate",t)},linkedUser:function(t){return l.a.post("/web/hb/luckDraw/luck-users",t)},payList:function(t){return l.a.post("/pay/list",t)},payDetail:function(t){return l.a.post("/pay/detail",t)},payInfo:function(t){return l.a.post("/pay/info",t)},payAddOrEdit:function(t){return l.a.post("/pay/insertOrUpdate",t)},paySet:function(t){return l.a.post("/pay/select",t)},getIntroduce:function(t){return l.a.post("/introduce/select",t)},delWinning:function(t){return l.a.get("/web/hb/luckDraw/delete"+m(t))},addOrUpdateIntroduce:function(t){return l.a.post("/introduce/addOrUpdate",t)},flowList:function(t){return l.a.post("/flow/list",t)},delflow:function(t){return l.a.post("/flow/delete",t)},addOrUpdateFlow:function(t){return l.a.post("/flow/addOrUpdate",t)},setRealtimeDynamic:function(t){return l.a.post("/dictionary/add",t)},getRealtimeDynamic:function(){return l.a.get("/dictionary/select?dictionaryCode=DYNAMIC")},programList:function(t){return l.a.get("/web/hb/act/query")},setScoreDate:function(t){return l.a.get("/web/hb/actConfig/score-date"+m(t))},addselection:function(t){return l.a.post("/web/hb/act/addOrUpdate",t)},voteselection:function(t){return l.a.get("/web/hb/act/vote"+m(t))},selectionHome:function(t){return l.a.get("/web/hb/actConfig/get")},delProgram:function(t){return l.a.get("/web/hb/act/delete"+m(t))},saveposter:function(t){return l.a.post("/web/hb/actConfig/addOrUpdate",t)},tLotteryList:function(t){return l.a.post("/bonus/list",t)},addticket:function(t){return l.a.post("/bonus/add",t)},updateticket:function(t){return l.a.post("/bonus/update",t)},delticket:function(t){return l.a.post("/bonus/delete",t)},getLotteryinfo:function(t){return l.a.post("/bonusIntroduce/list",t)},saveLotteryinfo:function(t){return l.a.post("/bonusIntroduce/saveOrUpdate",t)},getUsersByNumber:function(t){return l.a.post("/pay/listByTicketNumber",t)},linkWinning:function(t){return l.a.post("/bonusLog/add",t)},groupList:function(t){return l.a.get("/web/group/queryList",t)},addgroup:function(t){return l.a.post("/web/group/add",t)},delgroup:function(t){return l.a.get("/web/group/delete"+m(t))},redconfig:function(t){return l.a.get("/web/packet/config")},saveconfig:function(t){return l.a.get("/web/packet/add"+m(t))},getRedDetail:function(t){return l.a.get("/web/packet/user-detail"+m(t))},updateSeatLevel:function(t){return l.a.post("/seat/updateLevel",t)}},p={data:function(){return{tableData:[],depts:[],total:0,pages:0,param:{deptId:"",name:"",current:1,size:5},isAddUser:!1,isEditOrAdd:"add",isSetValue:!1,isImport:!1,fileList:[],file:"",userParam:{name:"",deptId:""},valueParam:{amount:""},curUserId:"",rules:{name:{type:"string",required:!0,message:"姓名必填"},deptId:{type:"string",required:!0,message:"部门必选"}},valuerules:{amount:{type:"number",required:!0,min:1,message:"充值金额必填且大于0"}}}},created:function(){this.getDepts(),this.getUserList()},methods:{incomeAndPay:function(){this.$router.push("/carnival/wealthDetail")},importUser:function(){this.$refs.userupload.submit()},uploadError:function(){this.$message.error("上传失败")},handleAvatarSuccess:function(t,e){this.isImport=!1,"200"==t.code?(this.getUserList(),this.$message.success("上传成功")):this.$message.error(t.message||"上传失败")},beforeUpload:function(t){this.file=t;var e="xlsx"===t.name.split(".")[1],a=t.size/1024/1024<100;return e?a?void 0:(this.$message.warning("上传模板大小不能超过 100MB!"),!1):(this.$message.warning("上传模板只支持xlsx格式!"),!1)},getDepts:function(){var t=this;d.depts().then(function(e){"200"==e.code&&(t.depts=e.data,t.depts.unshift({deptId:"",deptName:"全部部门"}))})},getUserList:function(){var t=this;d.userList(this.param).then(function(e){200==e.code?(t.tableData=e.data.records,t.param.size=e.data.size,t.total=parseInt(e.data.total),t.page=parseInt(e.data.pages)):t.$message.error(e.message||"查询用户列表失败")})},handleCurrentChange:function(t){this.param.current=t,this.getUserList()},search:function(){this.param.current=1,this.getUserList()},add:function(){this.isAddUser=!0,this.isEditOrAdd="add",this.userParam={name:"",id:"",deptId:""}},addUser:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;d.addUser(e.userParam).then(function(t){"200"==t.code?(e.$message.success("操作成功"),e.isAddUser=!1,e.param.current=1,e.getUserList()):e.$message.error(t.message||"操作失败")})})},del:function(t){var e=this;t=JSON.parse(u()(t)),this.$confirm("你确定删除当前用户？","删除").then(function(){d.delUser({userId:t.userId}).then(function(t){200==t.code?(e.$message.success("删除用户成功"),e.param.current=1,e.getUserList()):e.$message.error(t.message||"删除用户失败")})})},resetPass:function(t){var e=this;t=JSON.parse(u()(t)),this.$confirm("重置后密码将会改为 888888，确定重置吗？","重置密码",{type:"warning"}).then(function(){d.resetPass({userId:t.userId}).then(function(t){200==t.code?(e.$message.success("重置密码成功"),e.getUserList()):e.$message.error(t.message||"重置密码失败")})})},setValue:function(t){t=JSON.parse(u()(t)),this.isSetValue=!0,this.valueParam.amount="",this.curUserId=t.userId},saveValue:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a={amount:e.valueParam.amount,userId:e.curUserId};d.recharge(a).then(function(t){200==t.code?(e.$message.success("充值成功"),e.isSetValue=!1,e.getUserList()):e.$message.error(t.message||"充值失败")})})},edit:function(t){t=JSON.parse(u()(t)),this.userParam={name:t.userName,id:t.userId,deptId:t.deptId},this.isAddUser=!0,this.isEditOrAdd="edit"}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/users"}}},[t._v("用户管理")])],1),t._v(" "),a("div",{staticClass:"user-operate"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{size:"small"},model:{value:t.param.deptId,callback:function(e){t.$set(t.param,"deptId",e)},expression:"param.deptId"}},t._l(t.depts,function(e,s){return e.deptName?a("el-option",{key:s,attrs:{value:e.deptId,label:e.deptName}}):t._e()}))],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"输入姓名搜索",size:"small"},model:{value:t.param.name,callback:function(e){t.$set(t.param,"name",e)},expression:"param.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.search()}}},[t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"user-operate-right"},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.isImport=!0,t.fileList=[]}}},[t._v("批量导入")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.add()}}},[t._v("新增用户")])],1)],1)],1),t._v(" "),a("div",{staticClass:"user-list"},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%","min-height":"380px"},attrs:{data:t.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"userName",label:"姓名",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{property:"deptName",label:"所属部门",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"aliveAmount",label:"账户余额",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"rechargeAmount",label:"充值余额",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"balance",label:"应结款项",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",{staticClass:"user-list-value",on:{click:function(a){t.setValue(e.row)}}},[t._v("充值")]),t._v(" "),a("span",{staticClass:"user-list-edit",on:{click:function(a){t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("span",{staticClass:"user-list-reset",on:{click:function(a){t.resetPass(e.row)}}},[t._v("重置密码")]),t._v(" "),a("span",{staticClass:"user-list-del",on:{click:function(a){t.del(e.row)}}},[t._v("删除")])])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.param.current,"page-size":t.param.size,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"add-user",title:"add"==t.isEditOrAdd?"新增用户":"编辑用户",visible:t.isAddUser,width:"350px"},on:{"update:visible":function(e){t.isAddUser=e}}},[a("el-form",{ref:"userform",attrs:{rules:t.rules,model:t.userParam,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:t.userParam.name,callback:function(e){t.$set(t.userParam,"name",e)},expression:"userParam.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属部门",prop:"deptId"}},[a("el-select",{attrs:{size:"small"},model:{value:t.userParam.deptId,callback:function(e){t.$set(t.userParam,"deptId",e)},expression:"userParam.deptId"}},t._l(t.depts.slice(1),function(e,s){return e.deptName?a("el-option",{key:s,attrs:{value:e.deptId,label:e.deptName}}):t._e()}))],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isAddUser=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.addUser("userform")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"set-value",title:"充值",visible:t.isSetValue,width:"350px"},on:{"update:visible":function(e){t.isSetValue=e}}},[a("el-form",{ref:"valueform",attrs:{rules:t.valuerules,model:t.valueParam,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"充值金额",prop:"amount"}},[a("el-input",{attrs:{size:"small"},model:{value:t.valueParam.amount,callback:function(e){t.$set(t.valueParam,"amount",t._n(e))},expression:"valueParam.amount"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isSetValue=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.saveValue("valueform")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"importUser",title:"批量导入",visible:t.isImport,width:"350px"},on:{"update:visible":function(e){t.isImport=e}}},[a("el-form",{ref:"importform",attrs:{model:t.valueParam,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"",prop:""}},[a("el-upload",{ref:"userupload",staticClass:"upload-demo",attrs:{drag:"",action:"/user/import","before-upload":t.beforeUpload,limit:1,enctype:"multipart/form-data","on-error":t.uploadError,"on-success":t.handleAvatarSuccess,"auto-upload":!1,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("\n            将文件拖到此处，或\n            "),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传xlsx文件，且不超过100Mb")])])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isImport=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.importUser("importform")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(p,f,!1,function(t){a("/pOV")},null,null).exports,h=function(t){return t<10?"0"+t:""+t},g=function(t){if(t){var e=new Date(t);return e.getFullYear()+"-"+h(e.getMonth()+1)+"-"+h(e.getDate())+" "+h(e.getHours())+":"+h(e.getMinutes())+":"+h(e.getSeconds())}return""},b={data:function(){return{tableData:[],total:0,param:{current:1,size:5}}},created:function(){this.getDetailList()},methods:{getDateString:function(t){return g(t)},handleCurrentChange:function(t){this.param.current=t,this.getDetailList()},getDetailList:function(){}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wealth"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/users"}}},[t._v("用户管理")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/wealthDetail"}}},[t._v("收支明细")])],1),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"wealth-detail"},[a("el-table",{ref:"detailTable",staticStyle:{width:"100%",height:"280px"},attrs:{data:t.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"事件名称",width:"240"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"金额",width:"240"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n              "+t._s(t.getDateString(e.row.date))+"\n          ")]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.param.current,"page-size":t.param.size,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wealth-info"},[a("div",{staticClass:"wealth-info-item"},[a("div",{staticClass:"label"},[t._v("姓名")]),t._v(" "),a("div",{staticClass:"val"},[t._v("11")])]),t._v(" "),a("div",{staticClass:"wealth-info-item"},[a("div",{staticClass:"label"},[t._v("所在部门")]),t._v(" "),a("div",{staticClass:"val"},[t._v("11")])]),t._v(" "),a("div",{staticClass:"wealth-info-item"},[a("div",{staticClass:"label"},[t._v("账户余额")]),t._v(" "),a("div",{staticClass:"val"},[t._v("11")])]),t._v(" "),a("div",{staticClass:"wealth-info-item"},[a("div",{staticClass:"label"},[t._v("充值余额")]),t._v(" "),a("div",{staticClass:"val"},[t._v("11")])]),t._v(" "),a("div",{staticClass:"wealth-info-item"},[a("div",{staticClass:"label"},[t._v("因借款项")]),t._v(" "),a("div",{staticClass:"val"},[t._v("11")])])])}]};var y=a("VU/8")(b,_,!1,function(t){a("wcRs")},null,null).exports,k={data:function(){return{dynamic:"",form:{},tableData:[],flowParam:{name:"",time:"",id:""},isEditOrAdd:"add",isFlow:!1,rules:{name:{type:"string",required:!0,message:"名称必填"},time:{type:"string",required:!0,message:"时间必填"}},yearrules:{slogan1:{type:"string",required:!0,message:"一级标题必填"},slogan2:{type:"string",required:!0,message:"二级标题必填"},date:{required:!0,message:"年会时间必填"},compere:{type:"string",required:!0,message:"主持人必填"},address:{type:"string",required:!0,message:"年会地址必填"},remark:{type:"string",required:!0,message:"备注必填"}}}},created:function(){this.getIntroduce(),this.flowList(),this.getRealtimeDynamic()},methods:{getRealtimeDynamic:function(){var t=this;d.getRealtimeDynamic().then(function(e){200==e.code?t.dynamic=e.data.content1:t.$message.error(e.message||"查询实时动态失败")})},setRealtimeDynamic:function(){var t=this,e={dictionaryCode:"DYNAMIC",level:"0",content:this.dynamic};d.setRealtimeDynamic(e).then(function(e){200==e.code?t.$message.success("更新成功"):t.$message.error(e.message||"更新失败")})},getIntroduce:function(){var t=this;d.getIntroduce().then(function(e){200==e.code?(t.form=e.data,e.data.date&&(t.form.date=g(e.data.date))):t.$message.error(e.message||"查询失败")})},addOrEdit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.form.date=g(e.form.date),d.addOrUpdateIntroduce(e.form).then(function(t){200==t.code?e.$message.success("操作成功"):e.$message.error(t.message||"操作失败")})})},flowList:function(){var t=this;d.flowList().then(function(e){200==e.code?t.tableData=e.data:t.$message.error(e.message||"查询失败")})},addOrUpdateFlow:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;d.addOrUpdateFlow(e.flowParam).then(function(t){200==t.code?(e.$message.success("操作成功"),e.isFlow=!1,e.flowList()):e.$message.error(t.message||"操作失败")})})},edit:function(t){t=JSON.parse(u()(t)),this.isEditOrAdd="edit",this.isFlow=!0,this.flowParam=t},del:function(t){var e=this;this.$confirm("你确定删除选中项?","删除").then(function(){d.delflow({id:t.id}).then(function(t){200==t.code?(e.$message.success("删除成功"),e.flowList()):e.$message.error(t.message||"删除失败")})})},add:function(){this.flowParam={name:"",time:"",id:""},this.isEditOrAdd="add",this.isFlow=!0}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"meeting"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/about/meeting"}}},[t._v("关于年会")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/about/meeting"}}},[t._v("座位信息")])],1),t._v(" "),a("div",{staticClass:"meeting-content"},[a("div",{staticClass:"meeting-content-item"},[t._m(0),t._v(" "),a("div",{staticClass:"meeting-content-item-top"},[a("el-input",{attrs:{size:"small"},model:{value:t.dynamic,callback:function(e){t.dynamic=e},expression:"dynamic"}}),t._v(" "),a("el-button",{attrs:{type:"warning",size:"small",disabled:!t.dynamic},on:{click:function(e){t.setRealtimeDynamic()}}},[t._v("更新动态")])],1)]),t._v(" "),a("div",{staticClass:"meeting-content-item"},[t._m(1),t._v(" "),a("div",{staticClass:"meeting-content-item-form"},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.yearrules,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"年会标题(一级标题):",prop:"slogan1"}},[a("el-input",{attrs:{size:"small"},model:{value:t.form.slogan1,callback:function(e){t.$set(t.form,"slogan1",e)},expression:"form.slogan1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"年会副标题(二级标题):",prop:"slogan2"}},[a("el-input",{attrs:{size:"small"},model:{value:t.form.slogan2,callback:function(e){t.$set(t.form,"slogan2",e)},expression:"form.slogan2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"年会时间:",prop:"date"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"主持人:",prop:"compere"}},[a("el-input",{attrs:{size:"small"},model:{value:t.form.compere,callback:function(e){t.$set(t.form,"compere",e)},expression:"form.compere"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"年会地址:",prop:"address"}},[a("el-input",{attrs:{size:"small"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.addOrEdit("form")}}},[t._v("保存")])],1)],1)],1)]),t._v(" "),a("div",{staticClass:"meeting-content-item"},[t._m(2),t._v(" "),a("div",{staticClass:"meeting-content-item-table"},[a("div",{staticClass:"meeting-content-item-table-add"},[a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){t.add()}}},[t._v("添加流程")])],1),t._v(" "),a("el-table",{ref:"flowTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":"",height:"250"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"time",label:"时间",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"流程",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",{staticClass:"blue",on:{click:function(a){t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("span",{staticClass:"red",on:{click:function(a){t.del(e.row)}}},[t._v("删除")])])]}}])})],1)],1)])]),t._v(" "),a("el-dialog",{attrs:{"custom-class":"operate-flow",title:"add"==t.isEditOrAdd?"新增流程":"编辑流程",visible:t.isFlow,width:"350px"},on:{"update:visible":function(e){t.isFlow=e}}},[a("el-form",{ref:"flowform",attrs:{rules:t.rules,model:t.flowParam,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"流程名称",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:t.flowParam.name,callback:function(e){t.$set(t.flowParam,"name",e)},expression:"flowParam.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"流程时间",prop:"time"}},[a("el-time-select",{attrs:{"picker-options":{start:"00:01",step:"00:01",end:"24:00"},placeholder:"选择时间"},model:{value:t.flowParam.time,callback:function(e){t.$set(t.flowParam,"time",e)},expression:"flowParam.time"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isFlow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.addOrUpdateFlow("flowform")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"meeting-content-item-header"},[e("span",{staticClass:"meeting-content-item-header-main"},[this._v("年会实时动态")]),this._v(" (注：更新动态后，点击更新动态)\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"meeting-content-item-header"},[e("span",{staticClass:"meeting-content-item-header-main"},[this._v("年会介绍")]),this._v(" (注：更新介绍后，点击更新动态)\n      ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"meeting-content-item-header"},[e("span",{staticClass:"meeting-content-item-header-main"},[this._v("节目流程")]),this._v(" （注：按照流程的时间排序）\n      ")])}]};var P=a("VU/8")(k,w,!1,function(t){a("VqYH")},null,null).exports,C={data:function(){return{tableData:[],userTableData:[],depts:[],total:0,pages:0,userTotal:0,userPages:0,param:{current:1,size:5},userParam:{current:1,size:5,name:"",deptId:""},isAddseat:!1,seatParam:{name:"",count:"",userIdList:[],userList:[],id:""},rules:{name:{type:"string",required:!0,message:"名称必填"},count:{type:"number",min:1,required:!0,message:"座位数必填且大于0"}}}},created:function(){this.getDepts(),this.getUserList(),this.getseatList()},methods:{updateSeatLevel:function(t){var e=this;/^([1-9][0-9]{0,1}|100)$/.test(t.level)?d.updateSeatLevel({id:t.id,level:t.level}).then(function(t){200==t.code?(e.$message.success("修改座位排序成功"),e.param.current=1,e.getseatList()):e.$message.error(t.message||"修改座位排序失败")}):this.$message.warning("座位排序号必须是1~100之间的数字")},delLink:function(t,e){this.seatParam.userList.splice(e,1)},edit:function(t){t=JSON.parse(u()(t)),this.isAddseat=!0,this.seatParam.name=t.name,this.seatParam.count=t.count,this.seatParam.userList=t.userInfoDtoList?t.userInfoDtoList:[],this.seatParam.id=t.id,this.getRepeatUserList()},getRepeatUserList:function(){this.userParam={current:1,size:5,name:"",deptId:""},this.getUserList()},getDepts:function(){var t=this;d.depts().then(function(e){"200"==e.code&&(t.depts=e.data,t.depts.unshift({deptId:"",deptName:"全部部门"}))})},getseatList:function(){var t=this;d.seatList(this.param).then(function(e){200==e.code?(t.tableData=e.data.records,t.pages=parseInt(e.data.pages),t.total=parseInt(e.data.total),t.param.size=parseInt(e.data.size)):t.$message.error(e.message||"查询座位列表失败")})},searchUser:function(){this.userParam.current=1,this.getUserList()},getUserList:function(){var t=this;d.userList(this.userParam).then(function(e){200==e.code?(t.userTableData=e.data.records,t.userPages=parseInt(e.data.pages),t.userTotal=parseInt(e.data.total),t.userParam.size=parseInt(e.data.size),t.filterNotSeatedUsers()):t.$message.error(e.message||"查询用户列表失败")})},handleCurrentChange:function(t){this.param.current=t,this.getseatList()},handCurrentUser:function(t){this.userParam.current=t,this.getUserList()},search:function(){this.param.current=1,this.getseatList()},goToAddSeat:function(){this.isAddseat=!0,this.seatParam={name:"",count:"",userIdList:[],userList:[],id:""},this.getRepeatUserList()},selectUser:function(t){var e=this.seatParam.userList.filter(function(e){return e.userId==t.userId});e&&e.length?this.$message.warning(t.userName+" 已经被添加过了"):this.seatParam.count>this.seatParam.userList.length?this.seatParam.userList.push(t):this.$message.warning("座位数已经达到上限，不能再增加了")},filterNotSeatedUsers:function(){this.userTableData.forEach(function(t){t.seatName&&(t.disabled=!0)})},addseat:function(t){var e=this,a=this;this.$refs[t].validate(function(t){if(!t)return!1;a.seatParam.userIdList.length=0,a.seatParam.userList.forEach(function(t){a.seatParam.userIdList.push('"'+t.userId+'"')}),0!=a.seatParam.userIdList.length?d.addSeat(a.seatParam).then(function(t){"200"==t.code?(e.$message.success("新增座位成功"),e.getseatList(),e.isAddseat=!1):e.$message.error(t.message||"新增座位失败")}):e.$message.warning("座位必须添加至少1个人员")})}}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"seat"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/about/meeting"}}},[t._v("关于年会")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/about/seat"}}},[t._v("座位信息")])],1),t._v(" "),a("div",{staticClass:"seat-operate"},[a("el-form",{attrs:{inline:!0}},[a("div",{staticClass:"seat-operate-right"},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.goToAddSeat()}}},[t._v("新增座位")])],1)])],1),t._v(" "),a("div",[a("el-table",{ref:"singleTable",staticStyle:{width:"100%","min-height":"380px"},attrs:{data:t.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"桌位名称",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"count",label:"座位数",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"level",label:"排序",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"small"},on:{blur:function(a){t.updateSeatLevel(e.row)}},model:{value:e.row.level,callback:function(a){t.$set(e.row,"level",t._n(a))},expression:"scope.row.level"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"桌位人员姓名",width:"520"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.userInfoDtoList,function(e){return a("span",{key:e.userId,staticClass:"seat-interval"},[t._v(t._s(e.userName))])})}}])}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",{staticClass:"seat-list-edit",on:{click:function(a){t.edit(e.row)}}},[t._v("编辑")])])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.param.current,"page-size":t.param.size,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"add-seat",title:t.seatParam.id?"修改座位":"新增座位",visible:t.isAddseat,width:"40%"},on:{"update:visible":function(e){t.isAddseat=e}}},[a("el-form",{ref:"seatform",attrs:{rules:t.rules,model:t.seatParam,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"桌位名称",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:t.seatParam.name,callback:function(e){t.$set(t.seatParam,"name",e)},expression:"seatParam.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"座位数",prop:"count"}},[a("el-input",{attrs:{size:"small"},model:{value:t.seatParam.count,callback:function(e){t.$set(t.seatParam,"count",t._n(e))},expression:"seatParam.count"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"已添加座位人员",prop:"members"}},[a("div",[a("span",[t._v(t._s(t.seatParam.userList.length)+"人")]),t._v(" "),a("span",[t._v("(点击叉号可删除)")])]),t._v(" "),a("div",t._l(t.seatParam.userList,function(e,s){return a("el-tag",{key:s,attrs:{closable:"",type:""},on:{close:function(a){t.delLink(e,s)}}},[t._v(t._s(e.userName))])}))]),t._v(" "),a("el-form-item",{attrs:{label:"所在部门"}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{size:"small"},model:{value:t.userParam.deptId,callback:function(e){t.$set(t.userParam,"deptId",e)},expression:"userParam.deptId"}},t._l(t.depts,function(e,s){return e.deptName?a("el-option",{key:s,attrs:{value:e.deptId,label:e.deptName}}):t._e()}))],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}}),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"输入姓名搜索",size:"small"},model:{value:t.userParam.name,callback:function(e){t.$set(t.userParam,"name",e)},expression:"userParam.name"}})],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:1}}),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(e){t.searchUser()}}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("el-table",{ref:"userTable",staticStyle:{width:"100%"},attrs:{data:t.userTableData,"highlight-current-row":"",height:"200"}},[a("el-table-column",{attrs:{property:"deptName",label:"所在部门"}}),t._v(" "),a("el-table-column",{attrs:{property:"userName",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",disabled:e.row.disabled,size:"small"},on:{click:function(a){t.selectUser(e.row)}}},[t._v(t._s(e.row.disabled?"已入座":"选择"))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.userParam.current,"page-size":t.userParam.size,layout:"total, prev, pager, next, jumper",total:t.userTotal},on:{"current-change":t.handCurrentUser}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isAddseat=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.addseat("seatform")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var $=a("VU/8")(C,L,!1,function(t){a("s1y1")},null,null).exports,I={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"fade"}},[e("div",{staticClass:"img-view",on:{click:this.bigImg}},[e("div",{staticClass:"img-layer"}),this._v(" "),e("div",{staticClass:"img"},[e("img",{attrs:{src:this.imgSrc}})])])])},staticRenderFns:[]};var x={components:{"big-img":a("VU/8")({props:["imgSrc"],methods:{bigImg:function(){this.$emit("clickit")}}},I,!1,function(t){a("WvIL")},"data-v-377f8b94",null).exports},data:function(){return{showImg:!1,imgSrc:"",collectionForm:{closeState:""},imgInfo:{path:""},file:"",fileList:[],isImport:!1}},created:function(){this.selectionHome()},methods:{preview:function(){this.showImg=!0,this.imgSrc=this.collectionForm.actUrl},viewImg:function(){this.showImg=!1},saveposter:function(){var t=this;d.saveposter({closeState:parseInt(this.collectionForm.closeState),url:this.imgInfo.path}).then(function(e){200==e.code?t.$message.success("保存成功"):t.$message.success("保存失败")})},uploadUrl:function(){return"/web/hb/actConfig/upload"},selectionHome:function(){var t=this;d.selectionHome().then(function(e){"200"==e.code?(e.data=e.data||{},t.collectionForm=e.data,void 0==e.data.closeState?t.collectionForm.closeState="1":t.collectionForm.closeState=e.data.closeState+"",t.imgInfo.path=e.data.actUrl||""):t.$message.error(e.message||"查询失败")})},uploadError:function(){this.$message.error("上传失败")},handleAvatarSuccess:function(t,e){this.isImport=!1,"200"==t.code?(this.imgInfo=t.data[0],this.collectionForm.actUrl=this.imgInfo.path,this.$message.success("上传成功")):this.$message.error(t.message||"上传失败")},importPoster:function(){this.$refs.imgupload.submit()},goToImport:function(){this.isImport=!0,this.file="",this.fileList=[]},beforeUpload:function(t){this.file=t;var e="jpg"===t.name.split(".")[1],a="jpeg"===t.name.split(".")[1],s="png"===t.name.split(".")[1],r=t.size/1024/1024<2;return e||a||s?r?void 0:(this.$message.warning("上传模板大小不能超过 2MB!"),!1):(this.$message.warning("上传模板只能是 jpg、jpeg、png格式!"),!1)}}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"collection"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/program/selection"}}},[t._v("节目管理")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/program/collection"}}},[t._v("节目征集")])],1),t._v(" "),a("div",{staticClass:"collection-content"},[a("el-form",{ref:"collectionFormRef",attrs:{"label-width":"150px"}},[a("el-form-item",{attrs:{label:"是否关闭节目征集:"}},[a("el-radio-group",{model:{value:t.collectionForm.closeState,callback:function(e){t.$set(t.collectionForm,"closeState",e)},expression:"collectionForm.closeState"}},[a("el-radio",{attrs:{label:"1"}},[t._v("是")]),t._v(" "),a("el-radio",{attrs:{label:"0"}},[t._v("否")])],1),t._v(" "),a("span",[t._v("（关闭节目征集后，app将会显示年会节目）")])],1),t._v(" "),a("el-form-item",{attrs:{label:"上传节目征集海报:"}},[t.collectionForm.actUrl?t._e():a("div",{staticClass:"collection-content-poster"},[a("div",{staticClass:"collection-content-poster-add"},[a("span",{staticClass:"icon-add",on:{click:function(e){t.goToImport()}}})]),t._v(" "),a("div",{staticClass:"collection-content-poster-label"},[t._v("点击添加图片")])]),t._v(" "),t.collectionForm.actUrl?a("div",{staticClass:"collection-content-posterExist"},[a("img",{attrs:{src:t.collectionForm.actUrl}}),t._v(" "),t.showImg?a("big-img",{attrs:{imgSrc:t.imgSrc},on:{clickit:t.viewImg}}):t._e()],1):t._e(),t._v(" "),a("div",{staticClass:"collection-content-posterInfo"},[a("div",{staticClass:"collection-content-posterInfo-operate"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.goToImport()}}},[t._v("替换")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){t.preview()}}},[t._v("预览")])],1),t._v(" "),a("div",{staticClass:"collection-content-posterInfo-explain"},[t._v("图片尺寸为1125*1854像素，文件类型：jpg/jpeg/png，大小不超过2M")])])]),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(e){t.saveposter()}}},[t._v("保存")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"importPoster",title:"上传海报","show-close":!1,visible:t.isImport,width:"600px"},on:{"update:visible":function(e){t.isImport=e}}},[a("el-form",{ref:"importform",attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"",prop:""}},[a("el-upload",{ref:"imgupload",staticClass:"upload-demo",attrs:{drag:"",action:t.uploadUrl(),"before-upload":t.beforeUpload,limit:1,enctype:"multipart/form-data","on-error":t.uploadError,"on-success":t.handleAvatarSuccess,"auto-upload":!1,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("\n            将文件拖到此处，或\n            "),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("图片尺寸为1125*1854像素，文件类型：jpg/jpeg/png，大小不超过2M")])])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isImport=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.importPoster("importform")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var D=a("VU/8")(x,z,!1,function(t){a("m8sr")},null,null).exports,N={data:function(){return{startDate:"",endDate:"",tableData:[],userTableData:[],depts:[],total:11,param:{deptId:"",name:"",current:1,size:8},isAddselection:!1,isVote:!1,selectionParam:{name:"",actUsers:"",orderIndex:"",id:""},voteParam:{id:"",name:"",score:""},rules:{name:{type:"string",required:!0,message:"名称必填"},actUsers:{type:"string",required:!0,message:"表演者必填"},orderIndex:{type:"number",min:1,max:100,required:!0,message:"排序必填且在0~100之间"}},voterules:{score:{type:"number",min:1,required:!0,message:"投票数必填且大于0"}}}},created:function(){this.getselectionList(),this.getScoreDate()},methods:{del:function(t){var e=this;this.$confirm("你确定删除此项？","删除").then(function(){d.delProgram({id:t.id}).then(function(t){"200"==t.code?(e.$message.success("删除成功"),e.getselectionList()):e.$message.error("删除失败")})})},projection:function(){this.$router.push("projection")},saveVote:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;d.voteselection(e.voteParam).then(function(t){200==t.code?(e.$message.success("投票成功"),e.getselectionList(),e.isVote=!1):e.$message.error(t.message||"投票失败")})})},vote:function(t){t=JSON.parse(u()(t)),this.voteParam.name=t.name,this.voteParam.id=t.id,this.voteParam.score="",this.isVote=!0},add:function(){this.selectionParam={name:"",actUsers:"",orderIndex:"",id:""},this.isAddselection=!0},edit:function(t){t=JSON.parse(u()(t)),this.isAddselection=!0,this.selectionParam.name=t.name,this.selectionParam.actUsers=t.actPerson,this.selectionParam.orderIndex=t.orderIndex,this.selectionParam.id=t.id},getScoreDate:function(){var t=this;d.selectionHome().then(function(e){"200"==e.code?e.data?(t.startDate=g(e.data.scoreStartDate),t.endDate=g(e.data.scoreEndDate)):(t.startDate="",t.endDate=""):t.$message.error(e.message||"查询失败")})},setScoreDate:function(){var t=this;this.startDate&&this.endDate?new Date(this.startDate)>=new Date(this.endDate)?this.$message.warning("结束时间必须大于开始时间"):d.setScoreDate({startDate:g(this.startDate),endDate:g(this.endDate)}).then(function(e){200==e.code?t.$message.success("设置成功"):t.$message.error(e.message||"设置失败")}):this.$message.warning("开始时间、结束时间必填")},getselectionList:function(){var t=this;d.programList().then(function(e){200==e.code?t.tableData=e.data:t.$message.error(e.message||"查询失败")})},addselection:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;d.addselection(e.selectionParam).then(function(t){"200"==t.code?(e.$message.success("操作成功"),e.getselectionList(),e.isAddselection=!1):e.$message.error(t.message||"操作失败")})})}}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"selection"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/program/selection"}}},[t._v("节目管理")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/program/selection"}}},[t._v("节目评选")])],1),t._v(" "),a("div",{staticClass:"selection-operate"},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"投票开始时间:"}},[a("el-date-picker",{attrs:{size:"small",align:"right",type:"datetime"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"投票结束时间:"}},[a("el-date-picker",{attrs:{size:"small",align:"right",type:"datetime"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(e){t.setScoreDate()}}},[t._v("保存")])],1),t._v(" "),a("div",{staticClass:"selection-operate-right"},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.add()}}},[t._v("新增节目")])],1)],1)],1),t._v(" "),a("div",[a("el-table",{ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"highlight-current-row":"",heigth:"300px","default-sort":{prop:"orderIndex"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"节目名称",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"actPerson",label:"表演者",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"orderIndex",label:"排序",width:"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{property:"score",label:"票数总数",width:"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{property:"appScore",label:"app投票",width:"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{property:"webScore",label:"后台投票",width:"120",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",{staticClass:"edit",on:{click:function(a){t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("span",{staticClass:"del",on:{click:function(a){t.vote(e.row)}}},[t._v("投票")]),t._v(" "),a("span",{staticClass:"red",on:{click:function(a){t.del(e.row)}}},[t._v("删除")])])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"add-selection",title:t.selectionParam.id?"修改节目":"新增节目",visible:t.isAddselection,width:"350px"},on:{"update:visible":function(e){t.isAddselection=e}}},[a("el-form",{ref:"selectionform",attrs:{rules:t.rules,model:t.selectionParam,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"节目名称",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:t.selectionParam.name,callback:function(e){t.$set(t.selectionParam,"name",e)},expression:"selectionParam.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"表演者",prop:"actUsers"}},[a("el-input",{attrs:{size:"small"},model:{value:t.selectionParam.actUsers,callback:function(e){t.$set(t.selectionParam,"actUsers",e)},expression:"selectionParam.actUsers"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序",prop:"orderIndex"}},[a("el-input",{attrs:{size:"small"},model:{value:t.selectionParam.orderIndex,callback:function(e){t.$set(t.selectionParam,"orderIndex",t._n(e))},expression:"selectionParam.orderIndex"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isAddselection=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.addselection("selectionform")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"vote-selection",title:"节目投票",visible:t.isVote,width:"350px"},on:{"update:visible":function(e){t.isVote=e}}},[a("el-form",{ref:"voteform",attrs:{rules:t.voterules,model:t.voteParam,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"节目名称",prop:"name"}},[a("el-input",{attrs:{disabled:"",size:"small"},model:{value:t.voteParam.name,callback:function(e){t.$set(t.voteParam,"name",e)},expression:"voteParam.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"投票数",prop:"score"}},[a("el-input",{attrs:{size:"small"},model:{value:t.voteParam.score,callback:function(e){t.$set(t.voteParam,"score",t._n(e))},expression:"voteParam.score"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isVote=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.saveVote("voteform")}}},[t._v("确定投票")])],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")(N,U,!1,function(t){a("mdFD")},null,null).exports,A={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-label"},[t._v(t._s(t.item.label))]),t._v(" "),a("div",{staticClass:"progress-bar",style:"width:"+t.width+"px"}),t._v(" "),a("div",{staticClass:"progress-val"},[t._v(t._s(t.item.value))])])},staticRenderFns:[]};var T={components:{Progress:a("VU/8")({props:["item"],data:function(){return{width:0}},created:function(){this.width=535*this.item.percent}},A,!1,function(t){a("rCE7")},null,null).exports},data:function(){return{list:[{label:"uuu",percent:1,value:145},{label:"uuu",percent:.5,value:72}]}}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"projection"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/program/selection"}}},[t._v("节目管理")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/program/selection"}}},[t._v("节目评选")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/program/projection"}}},[t._v("开启投影")])],1),t._v(" "),a("div",{staticClass:"projection-content"},t._l(t.list,function(t,e){return a("Progress",{key:e,attrs:{item:t}})}))],1)},staticRenderFns:[]};var E=a("VU/8")(T,F,!1,function(t){a("gcuk")},null,null).exports,O={data:function(){return{tableData:[],userTableData:[],depts:[],userTotal:0,userPages:0,isAddlottery:!1,isLink:!1,lotteryParam:{name:"",amount:"",id:""},linkParam:{name:"",amount:"",id:"",users:"",userList:[]},userParam:{current:1,size:5,name:"",deptId:""},rules:{name:{type:"string",required:!0,message:"奖品名称必填"},amount:{type:"number",min:1,required:!0,message:"奖品数量必填且大于0"}}}},created:function(){this.getDepts(),this.getlotteryList(),this.getUserList()},methods:{delLink:function(t,e){this.linkParam.userList.splice(e,1)},add:function(){this.isAddlottery=!0,this.lotteryParam={name:"",amount:"",id:""}},edit:function(t){t=JSON.parse(u()(t)),this.isAddlottery=!0,this.lotteryParam.name=t.name,this.lotteryParam.amount=t.amount,this.lotteryParam.id=t.id,this.lotteryParam.luckUsers=t.luckUsers?JSON.parse(t.luckUsers):[]},del:function(t){var e=this;this.$confirm("你确定删除此项?","删除").then(function(a){d.delWinning({id:t.id}).then(function(t){200==t.code?(e.$message.success("删除成功"),e.getlotteryList()):e.$message.error(t.message||"删除失败")})})},searchUser:function(){this.userParam.current=1,this.getUserList()},getRepeatUserList:function(){this.userParam={current:1,size:5,name:"",deptId:""},this.getUserList()},getUserList:function(){var t=this;d.userList(this.userParam).then(function(e){200==e.code?(t.userTableData=e.data.records,t.userPages=parseInt(e.data.pages),t.userTotal=parseInt(e.data.total),t.userParam.size=parseInt(e.data.size)):t.$message.error(e.message||"查询用户列表失败")})},selectUser:function(t){var e=this.linkParam.userList.filter(function(e){return t.userId==e.userId});e&&e.length?this.$message.warning(t.userName+" 已经被添加过了"):this.linkParam.amount>this.linkParam.userList.length?this.linkParam.userList.push({name:t.userName,userId:t.userId,deptId:t.deptId}):this.$message.warning("关联中奖人不能超过奖品数量")},handCurrentUser:function(t){this.userParam.current=t,this.getUserList()},associate:function(t){this.isLink=!0,this.linkParam.name=t.name,this.linkParam.id=t.id,this.linkParam.amount=t.amount,this.linkParam.userList=[];var e=t.luckUsers?JSON.parse(t.luckUsers):[];this.linkParam.userList=e,this.getRepeatUserList()},saveAssociate:function(t){var e=this,a=[];this.linkParam.userList.forEach(function(t){a.push(u()(t))});var s={id:this.linkParam.id,users:"["+a.join(",")+"]"};d.linkedUser(s).then(function(t){"200"==t.code?(e.$message.success("关联成功"),e.getlotteryList(),e.isLink=!1):e.$message.error(t.message||"关联失败")})},getDepts:function(){var t=this;d.depts().then(function(e){"200"==e.code&&(t.depts=e.data,t.depts.unshift({deptId:"",deptName:"全部部门"}))})},getlotteryList:function(){var t=this;d.lotteryList().then(function(e){200==e.code?t.tableData=e.data:t.$message.error(e.message||"查询奖项列表失败")})},search:function(){getlotteryList()},addlottery:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.lotteryParam.id&&parseInt(e.lotteryParam.amount)<e.lotteryParam.luckUsers.length?e.$message.warning("奖品数量不能小于中奖人数量，若要修改请取消中奖人"):d.addOrUpdateLottery(e.lotteryParam).then(function(t){"200"==t.code?(e.$message.success("操作成功"),e.getlotteryList(),e.isAddlottery=!1):e.$message.error(t.message||"操作失败")})})}}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lottery"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/lotterys"}}},[t._v("年会抽奖")])],1),t._v(" "),a("div",{staticClass:"lottery-operate"},[a("el-form",{attrs:{inline:!0}},[a("div",{staticClass:"lottery-operate-right"},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.add()}}},[t._v("新增奖项")])],1)])],1),t._v(" "),a("div",[a("el-table",{ref:"singleTable",staticStyle:{width:"100%","min-height":"380px"},attrs:{data:t.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"奖品名称",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"amount",label:"奖品数量",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{property:"orderIndex",label:"排序",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"中奖人信息",width:"320"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.luckUsers?JSON.parse(e.row.luckUsers):[],function(e){return a("span",{key:e.userId,staticClass:"span-interval"},[t._v(t._s(e.name))])})}}])}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",{staticClass:"edit",on:{click:function(a){t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("span",{staticStyle:{cursor:"pointer"},on:{click:function(a){t.associate(e.row)}}},[t._v("关联中奖人")]),t._v(" "),a("span",{staticClass:"del",on:{click:function(a){t.del(e.row)}}},[t._v("删除")])])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"add-lottery",title:t.lotteryParam.id?"修改奖项":"新增奖项",visible:t.isAddlottery,width:"350px"},on:{"update:visible":function(e){t.isAddlottery=e}}},[a("el-form",{ref:"lotteryform",attrs:{rules:t.rules,model:t.lotteryParam,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"奖品名称",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:t.lotteryParam.name,callback:function(e){t.$set(t.lotteryParam,"name",e)},expression:"lotteryParam.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品数量",prop:"amount"}},[a("el-input",{attrs:{size:"small"},model:{value:t.lotteryParam.amount,callback:function(e){t.$set(t.lotteryParam,"amount",t._n(e))},expression:"lotteryParam.amount"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isAddlottery=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.addlottery("lotteryform")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"link-user",title:"关联中奖人",visible:t.isLink,width:"40%"},on:{"update:visible":function(e){t.isLink=e}}},[a("el-form",{ref:"linkform",attrs:{model:t.linkParam,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"奖品名称",prop:"name"}},[t._v(t._s(t.linkParam.name))]),t._v(" "),a("el-form-item",{attrs:{label:"数量",prop:"amount"}},[t._v(t._s(t.linkParam.amount))]),t._v(" "),a("el-form-item",{attrs:{label:"已关联中奖人",prop:"members"}},[a("div",[a("span",[t._v(t._s(t.linkParam.userList.length)+"人")]),t._v(" "),a("span",[t._v("(点击叉号可删除)")])]),t._v(" "),a("div",t._l(t.linkParam.userList,function(e,s){return a("el-tag",{key:s,attrs:{closable:"",type:""},on:{close:function(a){t.delLink(e,s)}}},[t._v(t._s(e.name))])}))]),t._v(" "),a("el-form-item",{attrs:{label:"所在部门"}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{size:"small"},model:{value:t.userParam.deptId,callback:function(e){t.$set(t.userParam,"deptId",e)},expression:"userParam.deptId"}},t._l(t.depts,function(e,s){return e.deptName?a("el-option",{key:s,attrs:{value:e.deptId,label:e.deptName}}):t._e()}))],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}}),t._v(" "),a("el-col",{staticStyle:{margin:"0 10px"},attrs:{span:8}},[a("el-input",{attrs:{placeholder:"输入姓名搜索",size:"small"},model:{value:t.userParam.name,callback:function(e){t.$set(t.userParam,"name",e)},expression:"userParam.name"}})],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:1}}),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(e){t.searchUser()}}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("el-table",{ref:"userTable",staticStyle:{width:"100%"},attrs:{data:t.userTableData,"highlight-current-row":"",height:"200"}},[a("el-table-column",{attrs:{property:"deptName",label:"所在部门"}}),t._v(" "),a("el-table-column",{attrs:{property:"userName",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){t.selectUser(e.row)}}},[t._v("添加为中奖人")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.userParam.current,"page-size":t.userParam.size,layout:"total, prev, pager, next, jumper",total:t.userTotal},on:{"current-change":t.handCurrentUser}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isLink=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.saveAssociate("linkform")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var V=a("VU/8")(O,R,!1,function(t){a("xNjv")},null,null).exports,j={data:function(){return{tableData:[],activeItem:"send",depts:[],total:0,pages:0,redConfig:{packetTime:0,moneyLimit:0,packetTimeout:0},detail:{},param:{deptId:"",name:"",current:1,size:5},isDetail:!1,rules:{},saveRules:{moneyLimit:{type:"number",min:0,max:1e4,required:!0,message:"红包金额上限在0~10000之间"},packetTime:{type:"number",min:0,max:24,required:!0,message:"退回时长在0~24小时之间"}}}},created:function(){this.getDepts(),this.getRedConfig(),this.getredList()},methods:{formatDate:function(t){return g(t)},getDetail:function(t){var e=this;this.isDetail=!0,d.getRedDetail({userId:t.userId,deptName:t.deptName}).then(function(t){200==t.code?e.detail=t.data:e.$message.error(t.message||"查询详情失败")})},saveConfig:function(){var t=this;this.redConfig.packetTimeout=this.redConfig.packetTime,d.saveconfig(this.redConfig).then(function(e){200==e.code?t.$message.success("保存成功"):t.$message.error(e.message||"保存失败")})},getRedConfig:function(){var t=this;d.redconfig().then(function(e){200==e.code?(t.redConfig=e.data,t.redConfig.packetTime=e.data.packetTimeout):t.$message.error(e.message||"查询失败")})},getDepts:function(){var t=this;d.depts().then(function(e){"200"==e.code&&(t.depts=e.data,t.depts.unshift({deptId:"",deptName:"全部部门"}))})},getredList:function(){var t=this;d.userList(this.param).then(function(e){200==e.code?(t.tableData=e.data.records,t.param.size=e.data.size,t.total=parseInt(e.data.total),t.pages=parseInt(e.data.pages)):t.$message.error(e.message||"查询用户列表失败")})},handleCurrentChange:function(t){this.param.current=t,this.getredList()},search:function(){this.getredList()},addred:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;d.addred(e.redParam).then(function(t){"200"==code?(e.$message.success("新增用户成功"),e.isAddred=!1):e.$message.error(t.message||"新增用户失败")})})}}},q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"red"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/redEnvelope"}}},[t._v("红包管理")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/redEnvelope"}}},[t._v("红包记录")])],1),t._v(" "),a("div",{staticClass:"red-operate"},[a("el-form",{ref:"saveform",attrs:{inline:!0,model:t.redConfig,rules:t.saveRules}},[a("el-form-item",{attrs:{label:"红包金额上限(元):",prop:"moneyLimit"}},[a("el-input",{attrs:{size:"small"},model:{value:t.redConfig.moneyLimit,callback:function(e){t.$set(t.redConfig,"moneyLimit",t._n(e))},expression:"redConfig.moneyLimit"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"未领取红包退回时长(小时):",prop:"packetTime"}},[a("el-input",{attrs:{size:"small"},model:{value:t.redConfig.packetTime,callback:function(e){t.$set(t.redConfig,"packetTime",t._n(e))},expression:"redConfig.packetTime"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.saveConfig("saveForm")}}},[t._v("保存")])],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-select",{attrs:{size:"small"},model:{value:t.param.deptId,callback:function(e){t.$set(t.param,"deptId",e)},expression:"param.deptId"}},t._l(t.depts,function(e,s){return e.deptName?a("el-option",{key:s,attrs:{value:e.deptId,label:e.deptName}}):t._e()}))],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{placeholder:"输入姓名搜索",size:"small"},model:{value:t.param.name,callback:function(e){t.$set(t.param,"name",e)},expression:"param.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.search()}}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-table",{ref:"singleTable",staticStyle:{width:"100%","min-height":"380px"},attrs:{data:t.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"userName",label:"姓名",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{property:"deptName",label:"所属部门",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{property:"sendPacketAmount",label:"发出红包金额",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{property:"receivePacketAmount",label:"收到红包金额",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",{staticClass:"blue",on:{click:function(a){t.getDetail(e.row)}}},[t._v("查看详情记录")])])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.param.current,"page-size":t.param.size,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"red-detail",title:"红包详情",visible:t.isDetail,width:"40%"},on:{"update:visible":function(e){t.isDetail=e}}},[a("div",{staticClass:"red-detail-info"},[a("div",{staticClass:"red-detail-info-items"},[a("span",{staticClass:"red-detail-info-item"},[a("span",{staticClass:"red-detail-info-item-label"},[t._v("姓名:")]),t._v("\n          "+t._s(t.detail.name)+"\n        ")]),t._v(" "),a("span",{staticClass:"red-detail-info-item"},[a("span",{staticClass:"red-detail-info-item-label"},[t._v("所在部门:")]),t._v("\n          "+t._s(t.detail.deptName)+"\n        ")])]),t._v(" "),a("div",{staticClass:"red-detail-info-items"},[a("span",{staticClass:"red-detail-info-item"},[a("span",{staticClass:"red-detail-info-item-label"},[t._v("发出红包金额:")]),t._v("\n          "+t._s(t.detail.sendPacketAmount)+"\n        ")]),t._v(" "),a("span",{staticClass:"red-detail-info-item"},[a("span",{staticClass:"red-detail-info-item-label"},[t._v("收到红包金额:")]),t._v("\n          "+t._s(t.detail.allPacketAmount)+"\n        ")])])]),t._v(" "),a("el-tabs",{attrs:{type:"card"},model:{value:t.activeItem,callback:function(e){t.activeItem=e},expression:"activeItem"}},[a("el-tab-pane",{attrs:{label:"发出红包",name:"send"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.detail.sendList,stripe:"",height:"200"}},[a("el-table-column",{attrs:{prop:"type",label:"红包类型",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s("1"==e.row.type?"普通红包":"随机红包"))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"packetMoney",label:"红包金额",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"红包数量",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sendDate",label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatDate(e.row.sendDate)))]}}])})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"收到红包",name:"receive"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.detail.receiveList,height:"200",stripe:""}},[a("el-table-column",{attrs:{prop:"userName",label:"红包来源",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"packetMoney",label:"红包金额",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"receiveDate",label:"时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.formatDate(e.row.receiveDate)))]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var M=a("VU/8")(j,q,!1,function(t){a("NFsy")},null,null).exports,J={data:function(){return{tableData:[],userTableData:[],depts:[],userTotal:0,userPages:0,userParam:{deptId:"",name:"",current:1,size:5},groupParam:{userList:[],groupName:"",id:""},memNum:0,isAddgroup:!1,rules:{groupName:{type:"string",required:!0,message:"名称必填"}}}},created:function(){this.getDepts(),this.getUserList(),this.getgroupList()},methods:{addGroupOperate:function(){this.isAddgroup=!0,this.groupParam={userList:[],groupName:"",id:""},this.getRepeatUserList()},edit:function(t){t=JSON.parse(u()(t)),this.isAddgroup=!0,this.groupParam.groupName=t.groupName,this.groupParam.id=t.groupId,this.groupParam.userList=t.userList?t.userList:[],this.memNum=this.groupParam.userList.length,this.getRepeatUserList()},del:function(t){var e=this;this.$confirm("你确定删除此项?","删除").then(function(){d.delgroup({groupId:t.groupId}).then(function(t){200==t.code?(e.$message.success("删除成功"),e.getgroupList()):e.$message.error(t.message||"删除失败")})})},delMember:function(t,e){this.groupParam.userList.splice(e,1),this.memNum=this.groupParam.userList.length},getDepts:function(){var t=this;d.depts().then(function(e){"200"==e.code&&(t.depts=e.data,t.depts.unshift({deptId:"",deptName:"全部部门"}))})},getgroupList:function(){var t=this;d.groupList().then(function(e){200==e.code?t.tableData=e.data:t.$message.error(e.message||"查询失败")})},addgroup:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=[];e.groupParam.userList.forEach(function(t){a.push(u()({userId:t.userId}))});var s={groupName:e.groupParam.groupName,id:e.groupParam.id,users:"["+a.join(",")+"]"};d.addgroup(s).then(function(t){"200"==t.code?(e.$message.success("操作成功"),e.isAddgroup=!1,e.getgroupList()):e.$message.error(t.message||"操作失败")})})},searchUser:function(){this.userParam.current=1,this.getUserList()},getRepeatUserList:function(){this.userParam={current:1,size:5,name:"",deptId:""},this.getUserList()},getUserList:function(){var t=this;d.userList(this.userParam).then(function(e){200==e.code?(t.userTableData=e.data.records,t.userPages=parseInt(e.data.pages),t.userTotal=parseInt(e.data.total),t.userParam.size=parseInt(e.data.size)):t.$message.error(e.message||"查询用户列表失败")})},selectUser:function(t){var e=this.groupParam.userList.filter(function(e){return t.userId==e.userId});e&&e.length?this.$message.warning(t.userName+" 已经被添加过了"):(this.groupParam.userList.push({name:t.userName,userId:t.userId,deptId:t.deptId}),this.memNum=this.groupParam.userList.length)},handCurrentUser:function(t){this.userParam.current=t,this.getUserList()}}},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"group"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/redEnvelope"}}},[t._v("红包管理")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/group"}}},[t._v("自定义群组")])],1),t._v(" "),a("div",{staticClass:"group-operate"},[a("el-form",{attrs:{inline:!0}},[a("div",{staticClass:"group-operate-right"},[a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.addGroupOperate()}}},[t._v("新增群组")])],1)])],1),t._v(" "),a("div",[a("el-table",{ref:"singleTable",staticStyle:{width:"100%","min-height":"380px"},attrs:{data:t.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"groupName",label:"群组名称",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{property:"deptName",label:"群组成员",width:"520"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",t._l(e.row.userList,function(e,s){return a("span",{key:s,staticClass:"span-interval"},[t._v(t._s(e.name))])}))]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",{staticClass:"blue",on:{click:function(a){t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("span",{staticClass:"del",on:{click:function(a){t.del(e.row)}}},[t._v("删除")])])]}}])})],1)],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"add-group",title:"新增群组","show-close":!1,visible:t.isAddgroup,width:"40%"},on:{"update:visible":function(e){t.isAddgroup=e}}},[a("el-form",{ref:"groupform",attrs:{rules:t.rules,model:t.groupParam,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"群组名称",prop:"groupName"}},[a("el-input",{attrs:{size:"small"},model:{value:t.groupParam.groupName,callback:function(e){t.$set(t.groupParam,"groupName",e)},expression:"groupParam.groupName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"群组成员",prop:"members"}},[a("div",[a("span",[t._v(t._s(t.memNum||0)+"人")]),t._v(" "),a("span",[t._v("(点击叉号可删除)")])]),t._v(" "),a("div",t._l(t.groupParam.userList,function(e,s){return a("el-tag",{key:s,attrs:{closable:"",type:""},on:{close:function(a){t.delMember(e,s)}}},[t._v(t._s(e.name))])}))]),t._v(" "),a("el-form-item",{attrs:{label:"所在部门",prop:"deptName"}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{size:"small"},model:{value:t.userParam.deptId,callback:function(e){t.$set(t.userParam,"deptId",e)},expression:"userParam.deptId"}},t._l(t.depts,function(e,s){return e.deptName?a("el-option",{key:s,attrs:{value:e.deptId,label:e.deptName}}):t._e()}))],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}}),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"输入姓名搜索",size:"small"},model:{value:t.userParam.name,callback:function(e){t.$set(t.userParam,"name",e)},expression:"userParam.name"}})],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:1}}),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(e){t.searchUser()}}},[t._v("搜索")])],1)],1)],1),t._v(" "),a("el-table",{ref:"userTable",staticStyle:{width:"100%"},attrs:{data:t.userTableData,"highlight-current-row":"",height:"200"}},[a("el-table-column",{attrs:{property:"deptName",label:"所在部门"}}),t._v(" "),a("el-table-column",{attrs:{property:"userName",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){t.selectUser(e.row)}}},[t._v("添加")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.userParam.current,"page-size":t.userParam.size,layout:"total, prev, pager, next, jumper",total:t.userTotal},on:{"current-change":t.handCurrentUser}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isAddgroup=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.addgroup("groupform")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var G=a("VU/8")(J,H,!1,function(t){a("1NtW")},null,null).exports,W={data:function(){return{tableData:[],depts:[],total:0,pages:0,param:{current:1,size:5},payinfo:{},rules:{}}},created:function(){this.getPayList(),this.getPoolInfo()},methods:{getPoolInfo:function(){var t=this;d.payInfo().then(function(e){200==e.code?t.payinfo=e.data:t.$message.error(e.message||"查询失败")})},goToDetail:function(t){var e=u()(t);this.$router.push({path:"/carnival/bowl/detail",query:{info:e}})},getPayList:function(){var t=this;d.payList(this.param).then(function(e){200==e.code?(t.tableData=e.data.records,t.param.size=parseInt(e.data.size),t.total=parseInt(e.data.total),t.pages=parseInt(e.data.total)):t.$message.error(e.message||"查询购买记录失败")})},handleCurrentChange:function(t){this.param.current=t,this.getPayList()},search:function(){this.param.current=1,this.getPayList()}}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"history"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/bowl/history"}}},[t._v("聚宝盆")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/bowl/history"}}},[t._v("购买记录")])],1),t._v(" "),a("div",{staticClass:"history-info"},[a("span",{staticClass:"history-info-item"},[a("span",{staticClass:"history-info-item-label"},[t._v("聚宝盆奖池(元):")]),t._v("\n      "+t._s(t.payinfo.totalAmount?t.payinfo.totalAmount.toLocaleString("en-US"):0)+"\n    ")]),t._v(" "),a("span",{staticClass:"history-info-item"},[a("span",{staticClass:"history-info-item-label"},[t._v("彩票销售(张):")]),t._v("\n      "+t._s(t.payinfo.saleNumber?t.payinfo.saleNumber.toLocaleString("en-US"):0)+"\n    ")]),t._v(" "),a("span",{staticClass:"history-info-item"},[a("span",{staticClass:"history-info-item-label"},[t._v("累计销量(张):")]),t._v("\n      "+t._s(t.payinfo.totalNumber?t.payinfo.totalNumber.toLocaleString("en-US"):0)+"\n    ")])]),t._v(" "),a("div",[a("el-table",{ref:"singleTable",staticStyle:{width:"100%","min-height":"380px"},attrs:{data:t.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{property:"userName",label:"姓名",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"deptName",label:"所属部门",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"totalCount",label:"购买数量",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"totalAmount",label:"购买金额",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{property:"ticketNumber",label:"彩票号码"}}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",{staticClass:"blue",on:{click:function(a){t.goToDetail(e.row)}}},[t._v("查看详情")])])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.param.current,"page-size":t.param.size,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var Y=a("VU/8")(W,B,!1,function(t){a("O3rh")},null,null).exports,Q=a("woOf"),X=a.n(Q),K={data:function(){return{tableData:[],depts:[],payinfo:{},total:0,pages:0,param:{current:1,size:5},isAddticket:!1,isLink:!1,userList:[],linkParam:{},operateNumber:"",ticketNumberLimit:0,addedNum:0,ticketParam:{name:"",count:"",id:""},rules:{name:{type:"string",required:!0,message:"名称必填"},count:{type:"number",min:1,required:!0,message:"数量必填且大于0"}}}},created:function(){this.getDepts(),this.getticketList(),this.getPoolInfo()},methods:{getPoolInfo:function(){var t=this;d.payInfo().then(function(e){200==e.code?t.payinfo=e.data:t.$message.error(e.message||"查询失败")})},del:function(t){var e=this;this.$confirm("此奖项所有信息将被清空，确定删除吗 ?","删除").then(function(){d.delticket({id:t.id}).then(function(t){200==t.code?(e.$message.success("删除成功"),e.getticketList()):e.$message.error(t.message||"删除失败")})})},add:function(){this.ticketParam={name:"",count:"",id:""},this.isAddticket=!0},edit:function(t){t=JSON.parse(u()(t)),this.ticketParam.id=t.id,this.ticketParam.name=t.name,this.ticketParam.count=t.count,this.ticketParam.payBonusLogDtoList=t.payBonusLogDtoList||[],this.isAddticket=!0},manage:function(t){this.operateNumber="",t=JSON.parse(u()(t)),this.isLink=!0,this.linkParam.name=t.name,this.linkParam.id=t.id,this.linkParam.count=t.count,this.linkParam.winningList=t.payBonusLogDtoList?t.payBonusLogDtoList:[],this.addedNum=this.linkParam.winningList.length,this.ticketNumberLimit=t.firstTicketNumber?(t.firstTicketNumber+"").length:5},delItem:function(t,e){this.linkParam.winningList.splice(e,1),this.addedNum=this.linkParam.winningList.length},addItem:function(){var t=this;new RegExp("^\\d{"+this.ticketNumberLimit+"}$").test(this.operateNumber+"")?d.getUsersByNumber({ticketNumber:this.operateNumber}).then(function(e){if(200==e.code){var a=e.data;a?t.linkParam.winningList.length<t.linkParam.count?(t.linkParam.winningList.push(a),t.addedNum=t.linkParam.winningList.length):t.$message.warning("此奖项最多添加"+t.linkParam.count+"个中奖号码"):t.$message.error("没有找到此中奖号码")}else t.$message.error(e.message||"查询失败")}):this.$message.warning("中奖号码必须是"+this.ticketNumberLimit+"位数字")},getDepts:function(){var t=this;d.depts().then(function(e){"200"==e.code&&(t.depts=e.data,t.depts.unshift({deptId:"",deptName:"全部部门"}))})},getticketList:function(){var t=this;d.tLotteryList(this.param).then(function(e){200==e.code?(t.tableData=e.data.records,t.pages=parseInt(e.data.pages),t.param.size=parseInt(e.data.size),t.total=parseInt(e.data.total)):t.$message.error(e.message||"查询失败")})},handleCurrentChange:function(t){this.param.current=t,this.getticketList()},search:function(){this.getticketList()},addticket:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.ticketParam.id&&parseInt(e.ticketParam.count)<e.ticketParam.payBonusLogDtoList.length?e.$message.warning("奖项数量不能小于中奖号码数量，若要修改请删除中奖号码"):(e.ticketParam.id?d.updateticket:d.addticket)(e.ticketParam).then(function(t){"200"==t.code?(e.$message.success("操作成功"),e.isAddticket=!1,e.getticketList()):e.$message.error(t.message||"操作失败")})})},linkWinning:function(){var t=this,e=[];this.linkParam.winningList.forEach(function(a){var s={};X()(s,a,{bonusId:t.linkParam.id}),e.push(u()(s))}),d.linkWinning({param:u()({userIdList:"["+e.join(",")+"]",id:this.linkParam.id})}).then(function(e){200==e.code?(t.isLink=!1,t.$message.success("关联成功"),t.getticketList()):t.$message.error(e.message||"关联失败")})}}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ticket"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/bowl/history"}}},[t._v("聚宝盆")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/bowl/ticket"}}},[t._v("彩票开奖")])],1),t._v(" "),a("div",{staticClass:"ticket-operate"},[a("span",{staticClass:"ticket-operate-item"},[a("span",{staticClass:"ticket-operate-item-label"},[t._v("累积销量(张)：")]),t._v("\n      "+t._s(t.payinfo.totalNumber?t.payinfo.totalNumber.toLocaleString("en-US"):0)+"\n    ")]),t._v(" "),a("span",{staticClass:"ticket-operate-item"},[a("span",{staticClass:"ticket-operate-item-label"},[t._v("聚宝盆奖池(元)：")]),t._v("\n      "+t._s(t.payinfo.totalAmount?t.payinfo.totalAmount.toLocaleString("en-US"):0)+"\n    ")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(e){t.add()}}},[t._v("创建奖项")])],1),t._v(" "),a("div",[a("el-table",{ref:"singleTable",staticStyle:{width:"100%","min-height":"380px"},attrs:{data:t.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"奖项名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"count",label:"数量",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"中奖信息",width:"520"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",t._l(e.row.payBonusLogDtoList,function(e,s){return a("span",{key:s,staticClass:"span-interval"},[a("span",[t._v(t._s(e.ticketNumber))]),t._v(" "),a("span",[t._v(t._s(e.userName))]),t._v(" "),a("span",[t._v(t._s(e.deptName))])])}))]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",{staticClass:"blue",on:{click:function(a){t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("span",{staticClass:"green",on:{click:function(a){t.manage(e.row)}}},[t._v("管理中奖信息")]),t._v(" "),a("span",{staticClass:"red",on:{click:function(a){t.del(e.row)}}},[t._v("删除")])])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.param.current,"page-size":t.param.size,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"add-ticket",title:t.ticketParam.id?"修改奖项":"创建奖项",visible:t.isAddticket,width:"350px"},on:{"update:visible":function(e){t.isAddticket=e}}},[a("el-form",{ref:"ticketform",attrs:{rules:t.rules,model:t.ticketParam,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"奖品名称",prop:"name"}},[a("el-input",{attrs:{size:"small"},model:{value:t.ticketParam.name,callback:function(e){t.$set(t.ticketParam,"name",e)},expression:"ticketParam.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"奖品数量",prop:"count"}},[a("el-input",{attrs:{size:"small"},model:{value:t.ticketParam.count,callback:function(e){t.$set(t.ticketParam,"count",t._n(e))},expression:"ticketParam.count"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isAddticket=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.addticket("ticketform")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{"custom-class":"link-winning",title:"管理中奖信息",visible:t.isLink,width:"40%"},on:{"update:visible":function(e){t.isLink=e}}},[a("el-form",{ref:"linkform",attrs:{model:t.linkParam,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"奖品名称",prop:"name"}},[t._v(t._s(t.linkParam.name))]),t._v(" "),a("el-form-item",{attrs:{label:"奖品数量",prop:"count"}},[t._v(t._s(t.linkParam.count))]),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{attrs:{size:"small",prop:"operateNumber"},model:{value:t.operateNumber,callback:function(e){t.operateNumber=e},expression:"operateNumber"}}),t._v(" "),a("el-button",{attrs:{type:"warning",size:"small",disabled:!t.operateNumber},on:{click:function(e){t.addItem()}}},[t._v("添加")]),t._v(" "),a("div",[t._v("中奖号码：已添加 "+t._s(t.addedNum?t.addedNum:0)+"，可添加 "+t._s(t.linkParam.count-t.addedNum))])],1)],1),t._v(" "),a("el-table",{ref:"winningTable",staticStyle:{width:"100%"},attrs:{data:t.linkParam.winningList,"highlight-current-row":"",height:"150"}},[a("el-table-column",{attrs:{property:"ticketNumber",label:"中奖号码"}}),t._v(" "),a("el-table-column",{attrs:{property:"deptName",label:"所在部门"}}),t._v(" "),a("el-table-column",{attrs:{property:"userName",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{property:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){t.delItem(e.row,e.index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.isLink=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(e){t.linkWinning("linkform")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var tt=a("VU/8")(K,Z,!1,function(t){a("XD/G")},null,null).exports,et={data:function(){return{tableData:[],depts:[],historyParam:{id:"",singAmount:"",totalNumber:"",firstTicketNumber:"",startTime:"",endTime:"",initAmount:""},param:{},rules:{},setrules:{},explainrules:{model:{type:"string",required:!0,message:"预售方式必填"},payModel:{type:"string",required:!0,message:"购买方式必填"},flow1:{type:"string",required:!0,message:"开奖流程必填"},flow2:{type:"string",required:!0,message:"开奖流程必填"},flow3:{type:"string",required:!0,message:"开奖流程必填"}}}},created:function(){this.getCurrentSet(),this.getLotteryinfo()},methods:{getLotteryinfo:function(){var t=this;d.getLotteryinfo().then(function(e){"200"==e.code?t.param=e.data:t.$message.error(e.message||"查询彩券信息失败")})},saveSet:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;d.saveLotteryinfo(e.param).then(function(t){"200"==t.code?e.$message.success("设置成功"):e.$message.error(t.message||"设置失败")})})},saveRecord:function(t){var e=this;this.historyParam.startTime=g(this.historyParam.startTime),this.historyParam.endTime=g(this.historyParam.endTime),d.payAddOrEdit(this.historyParam).then(function(t){"200"==t.code?(e.$message.success("操作成功"),e.getPayList()):e.$message.error(t.message||"操作失败")})},getCurrentSet:function(){var t=this;d.paySet().then(function(e){"200"==e.code?(t.historyParam=e.data,t.historyParam.startTime=g(t.historyParam.startTime),t.historyParam.endTime=g(t.historyParam.endTime)):t.$message.error(e.message||"获取设置失败")})}}},at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ticketset"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/bowl/history"}}},[t._v("聚宝盆")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/bowl/history"}}},[t._v("彩票设置")])],1),t._v(" "),a("div",{staticClass:"ticketset-operate"},[a("el-form",{ref:"setForm",attrs:{inline:!0,rules:t.setrules,name:"addOrEditForm","label-width":"100px"}},[a("el-form-item",{attrs:{label:"单张金额(元):",prop:"singAmount"}},[a("el-input",{attrs:{size:"small"},model:{value:t.historyParam.singAmount,callback:function(e){t.$set(t.historyParam,"singAmount",e)},expression:"historyParam.singAmount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"彩票总数(张):",prop:"totalNumber"}},[a("el-input",{attrs:{size:"small"},model:{value:t.historyParam.totalNumber,callback:function(e){t.$set(t.historyParam,"totalNumber",e)},expression:"historyParam.totalNumber "}})],1),t._v(" "),a("el-form-item",{attrs:{label:"购买开始时间:",prop:"startTime"}},[a("el-date-picker",{attrs:{size:"small",type:"datetime",placeholder:""},model:{value:t.historyParam.startTime,callback:function(e){t.$set(t.historyParam,"startTime",e)},expression:"historyParam.startTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"购买结束时间:",prop:"endTime"}},[a("el-date-picker",{attrs:{size:"small",type:"datetime",placeholder:""},model:{value:t.historyParam.endTime,callback:function(e){t.$set(t.historyParam,"endTime",e)},expression:"historyParam.endTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.saveRecord("addOrEditForm")}}},[t._v("保存")])],1)],1),t._v(" "),a("el-form",{attrs:{inline:!0,rules:t.rules,name:"addOrEditForm1","label-width":"100px"}},[a("el-form-item",{attrs:{label:"首张彩票号码:",prop:"firstTicketNumber"}},[a("el-input",{attrs:{size:"small"},model:{value:t.historyParam.firstTicketNumber,callback:function(e){t.$set(t.historyParam,"firstTicketNumber",e)},expression:"historyParam.firstTicketNumber"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"奖池初始(元):",prop:"initAmount"}},[a("el-input",{attrs:{size:"small"},model:{value:t.historyParam.initAmount,callback:function(e){t.$set(t.historyParam,"initAmount",e)},expression:"historyParam.initAmount"}})],1)],1),t._v(" "),a("div")],1),t._v(" "),a("div",{staticClass:"ticketset-explain"},[a("div",{staticClass:"ticketset-explain-header"},[t._v("奖项说明")]),t._v(" "),a("el-form",{ref:"explainform",attrs:{"label-position":"right",model:t.param,rules:t.explainrules,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"预售方式:",prop:"model"}},[a("el-input",{attrs:{size:"small"},model:{value:t.param.model,callback:function(e){t.$set(t.param,"model",e)},expression:"param.model"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"购买方式:",prop:"payModel"}},[a("el-input",{attrs:{size:"small"},model:{value:t.param.payModel,callback:function(e){t.$set(t.param,"payModel",e)},expression:"param.payModel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"开奖流程:",prop:"flow1"}},[a("el-input",{attrs:{size:"small"},model:{value:t.param.flow1,callback:function(e){t.$set(t.param,"flow1",e)},expression:"param.flow1"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"flow2"}},[a("el-input",{attrs:{size:"small"},model:{value:t.param.flow2,callback:function(e){t.$set(t.param,"flow2",e)},expression:"param.flow2"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"flow3"}},[a("el-input",{attrs:{size:"small"},model:{value:t.param.flow3,callback:function(e){t.$set(t.param,"flow3",e)},expression:"param.flow3"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(e){t.saveSet("explainform")}}},[t._v("保存设置")])],1)],1)],1)],1)},staticRenderFns:[]};var st=a("VU/8")(et,at,!1,function(t){a("dtcC")},null,null).exports,rt={data:function(){return{tableData:[],info:""}},created:function(){this.info=JSON.parse(this.$route.query.info),this.getList()},methods:{getList:function(){var t=this;d.payDetail({userId:this.info.userId}).then(function(e){200==e.code?(e.data=e.data||[],e.data.forEach(function(e){e.deptName=t.info.deptName}),t.tableData=e.data):t.$message.error(e.message||"查询失败")})}}},it={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paydetail"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/bowl/history"}}},[t._v("聚宝盆")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/bowl/history"}}},[t._v("购买记录")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/carnival/bowl/detail"}}},[t._v("详情")])],1),t._v(" "),a("div",[a("div",{staticClass:"paydetail-info"},[a("span",{staticClass:"paydetail-info-item"},[a("span",{staticClass:"paydetail-info-item-label"},[t._v("姓名:")]),t._v("\n        "+t._s(t.info.userName)+"\n      ")]),t._v(" "),a("span",{staticClass:"paydetail-info-item"},[a("span",{staticClass:"paydetail-info-item-label"},[t._v("所在部门:")]),t._v("\n        "+t._s(t.info.deptName)+"\n      ")]),t._v(" "),a("span",{staticClass:"paydetail-info-item"},[a("span",{staticClass:"paydetail-info-item-label"},[t._v("购买数量(张):")]),t._v("\n        "+t._s(t.info.totalCount)+"\n      ")]),t._v(" "),a("span",{staticClass:"paydetail-info-item"},[a("span",{staticClass:"paydetail-info-item-label"},[t._v("购买总金额(元):")]),t._v("\n        "+t._s(t.info.totalAmount)+"\n      ")])]),t._v(" "),a("el-table",{ref:"singleTable",staticStyle:{width:"100%","max-height":"400px"},attrs:{data:t.tableData,"highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"count",label:"购买数量",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"amount",label:"购买金额",width:"220"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ticketNumber",label:"彩票号码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deptName",label:"所在部门",width:"220"}})],1)],1)],1)},staticRenderFns:[]};var nt=a("VU/8")(rt,it,!1,function(t){a("C48H")},null,null).exports,lt={name:"login",data:function(){return{rules:{name:{type:"string",required:!0,message:"账号必填"},password:{type:"string",required:!0,message:"密码必填"}},loginForm:{name:"",password:""},logining:!1}},created:function(){this.keyupEnter()},methods:{keyupEnter:function(){var t=this;document.onkeydown=function(e){13===e.keyCode&&"13"==e.which&&t.login("loginForm")}},login:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.logining=!0,"admin"==e.loginForm.name&&"password"==e.loginForm.password?(e.$router.push("/carnival"),sessionStorage.setItem("accout",e.loginForm.name)):d.loginIn(e.loginForm).then(function(t){e.logining=!1,"200"==t.code?(e.$router.push("/carnival"),sessionStorage.setItem("accout",e.loginForm.name)):e.$message.error(t.message||"登录失败")})})}}},ot={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"login"},[s("img",{staticClass:"login-back",attrs:{src:a("hE0G")}}),t._v(" "),s("div",{staticClass:"login-form"},[s("div",{staticClass:"login-form-header"},[t._v("年会管理系统")]),t._v(" "),s("div",{staticClass:"login-form-content"},[s("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:t.loginForm,"status-icon":"",rules:t.rules,"label-width":"0"}},[s("el-form-item",{attrs:{prop:"accout"}},[s("el-input",{attrs:{type:"text",placeholder:"请输入账号","prefix-icon":"icon-accout",autocomplete:"off"},model:{value:t.loginForm.name,callback:function(e){t.$set(t.loginForm,"name",e)},expression:"loginForm.name"}})],1),t._v(" "),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入密码","prefix-icon":"icon-password",autocomplete:"off"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"warning",loading:t.logining},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.login("loginForm")},click:function(e){t.login("loginForm")}}},[t._v(t._s(t.logining?"登录中...":"登录"))])],1)],1)],1)])])},staticRenderFns:[]};var ct=a("VU/8")(lt,ot,!1,function(t){a("3RNX")},null,null).exports,ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.activeItem,"background-color":"#484b61","text-color":"#fff","active-text-color":"#ffd04b",collapse:t.isCollapse}},[a("el-menu-item",{attrs:{index:"users"}},[a("router-link",{attrs:{tag:"div",to:"/carnival/users"}},[a("i",{staticClass:"icon-user-manage"}),t._v("\n                用户管理\n            ")])],1),t._v(" "),a("el-submenu",{attrs:{index:"about"}},[a("template",{slot:"title"},[a("i",{staticClass:"icon-about-meeting"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("关于年会")])]),t._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"meeting"}},[a("router-link",{attrs:{tag:"div",to:"/carnival/about/meeting"}},[t._v("\n                        年会信息\n                    ")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"seat"}},[a("router-link",{attrs:{tag:"div",to:"/carnival/about/seat"}},[t._v("\n                        座位信息\n                    ")])],1)],1)],2),t._v(" "),a("el-submenu",{attrs:{index:"program"}},[a("template",{slot:"title"},[a("i",{staticClass:"icon-program-manage"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("节目管理")])]),t._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"collection"}},[a("router-link",{attrs:{tag:"div",to:"/carnival/program/collection"}},[t._v("\n                        节目征集\n                    ")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"selection"}},[a("router-link",{attrs:{tag:"div",to:"/carnival/program/selection"}},[t._v("\n                        节目评选\n                    ")])],1)],1)],2),t._v(" "),a("el-menu-item",{attrs:{index:"lottery"}},[a("router-link",{attrs:{tag:"div",to:"/carnival/lottery"}},[a("i",{staticClass:"icon-lottery"}),t._v("\n                年会抽奖\n            ")])],1),t._v(" "),a("el-submenu",{attrs:{index:"red"}},[a("template",{slot:"title"},[a("i",{staticClass:"icon-red-manage"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("红包管理")])]),t._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"redEnvelope"}},[a("router-link",{attrs:{tag:"div",to:"/carnival/redEnvelope"}},[t._v("\n                        红包记录\n                    ")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"group"}},[a("router-link",{attrs:{tag:"div",to:"/carnival/group"}},[t._v("\n                        自定义群组\n                    ")])],1)],1)],2),t._v(" "),a("el-submenu",{attrs:{index:"bowl"}},[a("template",{slot:"title"},[a("i",{staticClass:"icon-bowl"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("聚宝盆")])]),t._v(" "),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"ticketset"}},[a("router-link",{attrs:{tag:"div",to:"/carnival/bowl/ticketset"}},[t._v("\n                        彩票设置\n                    ")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"history"}},[a("router-link",{attrs:{tag:"div",to:"/carnival/bowl/history"}},[t._v("\n                        购买记录\n                    ")])],1),t._v(" "),a("el-menu-item",{attrs:{index:"ticket"}},[a("router-link",{attrs:{tag:"div",to:"/carnival/bowl/ticket"}},[t._v("\n                        彩票开奖\n                    ")])],1)],1)],2)],1)],1)},staticRenderFns:[]};var mt={data:function(){return{accout:""}},components:{MenuList:a("VU/8")({data:function(){return{isCollapse:!1,activeItem:"users"}},created:function(){var t=this.$route.path.split("/");this.activeItem=t[t.length-1]}},ut,!1,function(t){a("2M5K")},null,null).exports},methods:{signout:function(){var t=this;this.$confirm("你确认退出当前系统？","退出").then(function(){t.$router.push("/login"),sessionStorage.clear()})}},created:function(){var t=sessionStorage.getItem("accout");t?this.accout=t:this.$router.push("/login")}},dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"frame"},[a("div",{staticClass:"frame-header"},[a("div",{staticClass:"frame-header-title"},[t._v("年会管理系统")]),t._v(" "),a("div",{staticClass:"frame-header-info"},[a("ul",[a("li",[a("div",{staticClass:"frame-header-info-img"},[t._v(t._s(t.accout.substr(0,1).toUpperCase()))]),t._v("\n          "+t._s(t.accout)+"\n        ")]),t._v(" "),a("li",[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"退出",placement:"bottom-start"}},[a("span",{staticClass:"frame-header-info-signout icon-sign-out",on:{click:function(e){t.signout()}}})])],1)])])]),t._v(" "),a("div",{staticClass:"frame-content"},[a("div",{staticClass:"frame-content-left"},[a("MenuList")],1),t._v(" "),a("div",{staticClass:"frame-content-right"},[a("router-view")],1)])])},staticRenderFns:[]};var pt=a("VU/8")(mt,dt,!1,function(t){a("ekQE")},null,null).exports;i.default.use(o.a);var ft=new o.a({routes:[{path:"/",redirect:"/carnival"},{path:"/login",name:"login",component:ct},{path:"/carnival",component:pt,name:"carnival",redirect:"/carnival/users",children:[{path:"/carnival/users",name:"userManage",component:v},{path:"/carnival/wealthDetail",name:"wealthDetail",component:y},{path:"/carnival/about/meeting",name:"meeting",component:P},{path:"/carnival/about/seat",name:"seat",component:$},{path:"/carnival/program/collection",name:"collection",component:D},{path:"/carnival/program/projection",name:"projection",component:E},{path:"/carnival/program/selection",name:"selection",component:S},{path:"/carnival/lottery",name:"lottery",component:V},{path:"/carnival/redEnvelope",name:"redEnvelope",component:M},{path:"/carnival/group",name:"group",component:G},{path:"/carnival/bowl/history",name:"history",component:Y},{path:"/carnival/bowl/detail",name:"historyDetail",component:nt},{path:"/carnival/bowl/ticketset",name:"ticketset",component:st},{path:"/carnival/bowl/ticket",name:"ticket",component:tt}]}]}),vt=a("DVuL"),ht=a.n(vt),gt=(a("LicG"),a("GFHN"),a("+ljQ"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]});var bt=a("VU/8")({name:"App"},gt,!1,function(t){a("gGJv")},null,null).exports;l.a.interceptors.request.use(function(t){return t.data&&t.data.name&&(t.data.name=t.data.name.replace(/^\s+|\s+$/g,"")),t},function(t){return r.a.reject(t)}),l.a.interceptors.response.use(function(t){return t.data}),l.a.defaults.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",l.a.defaults.transformRequest=[function(t){var e=[];for(var a in t){var s="";if("[object Array]"===Object.prototype.toString.call(t[a]))s="["+encodeURIComponent(t[a])+"]";else if("[object Object]"===Object.prototype.toString.call(t[a])){var r=[];for(var i in s+="{",t[a])r.push('"'+i+'":"'+t[a][i]+'"');s+=r.join(","),s+="}"}else s=encodeURIComponent(t[a]);e.push(encodeURIComponent(a)+"="+s)}return e.join("&")}],i.default.use(ht.a),i.default.config.productionTip=!1,new i.default({el:"#app",router:ft,components:{App:bt},template:"<App/>",filters:{date:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():""+e.getDate())+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}}})},O3rh:function(t,e){},VqYH:function(t,e){},WvIL:function(t,e){},"XD/G":function(t,e){},dtcC:function(t,e){},ekQE:function(t,e){},gGJv:function(t,e){},gcuk:function(t,e){},hE0G:function(t,e,a){t.exports=a.p+"static/img/login-back.a708dd6.png"},m8sr:function(t,e){},mdFD:function(t,e){},rCE7:function(t,e){},s1y1:function(t,e){},wcRs:function(t,e){},xNjv:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ffcd938bfcce9e178490.js.map